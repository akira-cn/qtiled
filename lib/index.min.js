!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.qtiled={})}(this,function(e){"use strict";function o(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return[e,n]},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},t=[],i=Math.round(e/2),d=Math.round(n/2),a=1;a<=e;a++)for(var l=a-i,v=1;v<=n;v++){var u=v-d;o(l,u,a,v,e,n)&&t.push(r(l,u,a,v,e,n))}return t}var u=Math.PI/180;function M(e){return Math.round(2*e)/2}var n=Math.sqrt(2),A=n/2,H=-1/n;function T(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=babelHelpers.slicedToArray(e,2),t=o[0],i=void 0===t?0:t,d=o[1],a=void 0===d?0:d,l=babelHelpers.slicedToArray(n,2),v=l[0],u=void 0===v?10:v,h=l[1],s=void 0===h?10:h,f=babelHelpers.slicedToArray(r,2),g=f[0],c=void 0===g?0:g,b=f[1],p=(a-(void 0===b?0:b))/(H*s),y=M(((i-c)/(H*u)+p)/A/2);return[y,M(p/A-y)]}var x=[[1,0,10],[0,1,10],[0,-1,10],[-1,0,10],[-1,-1,14],[-1,1,14],[1,-1,14],[1,1,14]];e.searchPath=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n,r,o,t){return!0},r=babelHelpers.slicedToArray(e,2),o=r[0],t=void 0===o?0:o,i=r[1],d=void 0===i?0:i,a=babelHelpers.slicedToArray(n,2),l=a[0],s=void 0===l?0:l,v=a[1],f=void 0===v?0:v;if(t===s&&d===f)return[e];if(Math.abs(t%1)!==Math.abs(s%1)||Math.abs(d%1)!==Math.abs(f%1))return[];var g={},c={};function u(e,n){for(var r=[],o=g[e+","+n],t=0;t<8;t++){var i=x[t],d=e+i[0],a=n+i[1],l=i[2],v=d+","+a,u=g[v];if(h(d,a,l,e,n)&&(void 0===u||o+l<u)&&(g[v]=o+l,c[v]=[e,n],r.push([d,a]),d===s&&a===f))break}return r}g[e.join()]=0;for(var b=[e],p=[];b.length;)for(var y=b.pop(),M=u(y[0],y[1]),A=M.length,H=0;H<A;H++){var T=M[H];if(T[0]===s&&T[1]===f){p.push(n);for(var m=n;m[0]!==t||m[1]!==d;)m=c[m.join()],p.unshift(m);return p}b.unshift(T)}return p},e.version="0.1.0",e.getUnitsByRowCol=o,e.getNeighbourUnitsByRowCol=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return[e,n]},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0};return o(e+2,n+2,r,function(e,n,r,o,t,i){return d(e,n,r,o,t,i)&&(1===r||r===t||1===o||o===i)})},e.getDiagonalUnitsByRowCol=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return[e,n]},d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},a=Math.round(e/2)-e%2,l=Math.round(n/2)-n%2;return o(e,n,r,function(e,n,r,o,t,i){return d(e,n,r,o,t,i)&&Math.abs(e)/a+Math.abs(n)/l<=1})},e.getUnitsByDiagonal=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return[e,n]},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(){return!0},t=babelHelpers.slicedToArray(e,2),i=t[0],d=void 0===i?0:i,a=t[1],l=void 0===a?0:a,v=babelHelpers.slicedToArray(n,2),u=v[0],h=void 0===u?0:u,s=v[1],f=void 0===s?0:s,g=Math.min(d,h),c=Math.max(d,h),b=Math.min(l,f),p=Math.max(l,f),y=[],M=g;M<=c;M++)for(var A=b;A<=p;A++)o(M,A,g,b,c,p,e,n)&&y.push(r(M,A,g,b,c,p,e,n));return y},e.rotateUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=babelHelpers.slicedToArray(e,2),o=r[0],t=void 0===o?0:o,i=r[1],d=void 0===i?0:i,a=n*u,l=10*Math.sin(a),v=10*Math.cos(a);return[Math.round(t*v-d*l)/10,Math.round(t*l+d*v)/10]},e.unit2pixel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return e.map(function(e,n){return M(e*r[n]+o[n])})},e._half_precision=M,e.pixel2unit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return e.map(function(e,n){return M((e-o[n])/r[n])})},e.unit2rhombusPixel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],o=babelHelpers.slicedToArray(e,2),t=o[0],i=void 0===t?0:t,d=o[1],a=void 0===d?0:d,l=babelHelpers.slicedToArray(n,2),v=l[0],u=void 0===v?10:v,h=l[1],s=void 0===h?10:h,f=babelHelpers.slicedToArray(r,2),g=f[0],c=void 0===g?0:g,b=f[1],p=void 0===b?0:b,y=(i+a)*A;return[M((i-a)*A*H*u+c),M(y*H*s+p)]},e.rhombusPixel2unit=T,e.getStaggeredUnitsByRowCol=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return[e,n]},o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,n){return!0},t=[],i=1===e,d=M(e/2)+(i&&1<n?-.5:0),a=M(n/2),l=[1,1],v=[0,0],u=0;u<n;u++)for(var h=M((u-a)/2),s=u%2==0,f=s?.5:0,g=0;g<e;g++){var c=T([g+f-d,h],l,v),b=babelHelpers.slicedToArray(c,2),p=b[0],y=b[1];(i||s||0!==g)&&o(p,y,g,u,e,n)&&t.push(r(p,y,g,u,e,n))}return t},e.staggeredUnitRound=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=babelHelpers.slicedToArray(e,2),r=n[0],o=void 0===r?0:r,t=n[1],i=void 0===t?0:t,d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],a=babelHelpers.slicedToArray(d,2),l=a[0],v=void 0===l?78:l,u=a[1],h=void 0===u?40:u,s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],f=babelHelpers.slicedToArray(s,2),g=f[0],c=void 0===g?0:g,b=f[1],p=void 0===b?0:b,y=v/2,M=h/2,A=Math.round(i/M)*M,H=Math.round(o/v)*v;return A%h===M&&(H+=0<=o-H?y:-y),[H+c,A+p]},Object.defineProperty(e,"__esModule",{value:!0})});
