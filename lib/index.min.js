!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(e.qtiled={})}(this,function(e){"use strict";function t(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return!0},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,n){return[e,n]},o=[],i=(e-1)/2,a=(n-1)/2,l=-a;l<=a;l++)for(var d=-i;d<=i;d++)t(d,l,i,a)&&o.push(r(d,l,i,a));return o}var u=Math.PI/180;function M(e){return Math.round(2*e)/2}var n=Math.sqrt(2),A=n/2,H=-1/n;function T(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=babelHelpers.slicedToArray(e,2),o=r[0],i=void 0===o?0:o,a=r[1],l=void 0===a?0:a,d=babelHelpers.slicedToArray(n,2),v=d[0],u=void 0===v?10:v,h=d[1],s=void 0===h?10:h,f=babelHelpers.slicedToArray(t,2),c=f[0],g=void 0===c?0:c,b=f[1],p=(l-(void 0===b?0:b))/(H*s),y=M(((i-g)/(H*u)+p)/A/2);return[y,M(p/A-y)]}var x=[[1,0,10],[0,1,10],[0,-1,10],[-1,0,10],[-1,-1,14],[-1,1,14],[1,-1,14],[1,1,14]];e.searchPath=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],h=arguments[2],t=babelHelpers.slicedToArray(e,2),r=t[0],o=void 0===r?0:r,i=t[1],a=void 0===i?0:i,l=babelHelpers.slicedToArray(n,2),d=l[0],s=void 0===d?0:d,v=l[1],f=void 0===v?0:v;if(o===s&&a===f)return[e];if(Math.abs(o%1)!==Math.abs(s%1)||Math.abs(a%1)!==Math.abs(f%1))return[];var c={},g={};function u(e,n){for(var t=[],r=c[e+","+n],o=0;o<8;o++){var i=x[o],a=e+i[0],l=n+i[1],d=i[2],v=a+","+l,u=c[v];if(h(a,l,d,e,n)&&(void 0===u||r+d<u)&&(c[v]=r+d,g[v]=[e,n],t.push([a,l]),a===s&&l===f))break}return t}c[e.join()]=0,"function"!=typeof h&&(h=function(e){return!0});for(var b=[e],p=[];b.length;)for(var y=b.pop(),M=u(y[0],y[1]),A=M.length,H=0;H<A;H++){var T=M[H];if(T[0]===s&&T[1]===f){p.push(n);for(var m=n;m[0]!==o||m[1]!==a;)m=g[m.join()],p.unshift(m);return p}b.unshift(T)}return p},e.getUnitsByRowCol=t,e.getNeighbourUnitsByRowCol=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return!0};return t(e+2,n+2,function(e,n,t,r){return o(e,n,t,r)&&(Math.abs(e)===t||Math.abs(n)===r)},3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,n){return[e,n]})},e.getDiagonalUnitsByRowCol=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return!0};return t(e,n,function(e,n,t,r){return o(e,n,t,r)&&Math.abs(e)/t+Math.abs(n)/r<=1},3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,n){return[e,n]})},e.getUnitsByDiagonal=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=babelHelpers.slicedToArray(e,2),r=t[0],o=void 0===r?0:r,i=t[1],a=void 0===i?0:i,l=babelHelpers.slicedToArray(n,2),d=l[0],v=void 0===d?0:d,u=l[1],h=void 0===u?0:u,s=Math.min(o,v),f=Math.max(o,v),c=Math.min(a,h),g=Math.max(a,h),b=[],p=s;p<=f;p++)for(var y=c;y<=g;y++)b.push([p,y]);return b},e.rotateUnit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=babelHelpers.slicedToArray(e,2),r=t[0],o=void 0===r?0:r,i=t[1],a=void 0===i?0:i,l=n*u,d=10*Math.sin(l),v=10*Math.cos(l);return[Math.round(o*v-a*d)/10,Math.round(o*d+a*v)/10]},e.unit2pixel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return e.map(function(e,n){return e*t[n]+r[n]})},e.pixel2unit=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[0,0],t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[10,10],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[0,0];return e.map(function(e,n){return M((e-r[n])/t[n])})},e.unit2rhombusPixel=function(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],r=babelHelpers.slicedToArray(e,2),o=r[0],i=void 0===o?0:o,a=r[1],l=void 0===a?0:a,d=babelHelpers.slicedToArray(n,2),v=d[0],u=void 0===v?10:v,h=d[1],s=void 0===h?10:h,f=babelHelpers.slicedToArray(t,2),c=f[0],g=void 0===c?0:c,b=f[1];return[(i-l)*A*H*u+g,(i+l)*A*H*s+(void 0===b?0:b)]},e.rhombusPixel2unit=T,e.getStaggeredUnitsByRowCol=function(){for(var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:function(e,n){return!0},r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:function(e,n){return[e,n]},o=[],i=(e-1)/2,a=(n-1)/2,l=[1,1],d=T([i,a],l),v=babelHelpers.slicedToArray(d,2),u=v[0],h=v[1],s=0,f=0;f<=a;f+=.5)for(var c=(++s%2==0?.5:0)-i;c<=i;c++){var g=T([c,f],l),b=babelHelpers.slicedToArray(g,2),p=b[0],y=b[1];t(p,y,u,h,s)&&o.push(r(p,y,u,h,s))}return o},Object.defineProperty(e,"__esModule",{value:!0})});
